<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pattern System</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/pattern-system.css">
</head>
<body>
  <!-- Sticky Header (unchanged) -->
  <header class="sticky-header">
    <div class="header-content">
      <a href="question-framework.html" class="back-arrow">
        <img src="assets/arrow-left.svg" alt="Back" class="arrow-icon">
      </a>
      <h1 class="page-title">PATTERN SYSTEM</h1>
      <a href="completion.html" class="forward-arrow">
        <img src="assets/arrow-right.svg" alt="Forward" class="arrow-icon">
      </a>
    </div>
  </header>

  <!-- Main Content Section -->
  <div class="main-content">
    <div class="content-text">
      <p>
        Each user's 9 responses are mapped onto a 3×3 grid. This grid reflects three meals across three days and encodes the structural pattern of intake.
      </p>
    </div>
  </div>

  <!-- Grid Demo Section -->
  <div class="grid-demo-section">
    <div class="grid-demo-container">
      <div class="grid-text">
        <h2 class="demo-title">Real-time generation of a visual intake shape.</h2>
        <p class="demo-description">
          This example shows the main forms assigned to each question and does not represent a specific user profile.
        </p>
      </div>
      <div class="grid-visual">
        <video class="grid-video" autoplay muted loop>
          <source src="assets/shapes building .mp4" type="video/mp4">
        </video>
      </div>
    </div>

    <div class="summary-text">
      <p>
        Individual answers combine to create a single intake shape. A compact visual summary of the user's eating structure, based on behavioral input.
      </p>
    </div>
  </div>

  <!-- Gray Section with Level Guide -->
  <div class="gray-section">
    <div class="gray-content">
      <div class="section-header">
        <span class="section-label">Visual Mapping Process</span>
      </div>

      <div class="level-container">
        <div class="level-visual">
          <img
            id="level-image"
            src="assets/levels/level-1.svg"
            alt="LEVEL 1"
            class="level-svg"
          >
        </div>

        <div class="level-content">
          <div class="level-header">
            <h3 id="level-title" class="level-title">LEVEL 1</h3>
            <button id="level-arrow" class="level-arrow" onclick="nextLevel()">
              <img
                id="level-arrow-icon"
                src="assets/arrow-right2.svg"
                alt="Next Level"
                class="arrow-icon"
              >
            </button>
          </div>
          <p id="level-description" class="level-description">
            All selected forms (Q1–Q9) are positioned on a predefined 3×3 intake grid according to question order and response category.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="logo">
        <img src="assets/logo.svg" alt="INTK72 Logo" class="logo-icon">
      </div>
      <p class="footer-text">
        Developed during stable conditions, this system pre‑defines meal timing, structure, and nutritional balance to ensure continuity when access is limited, disrupted, or uncertain. Preserving routine and reducing stress through pre‑established logic. Established 2025.
      </p>
    </div>
  </footer>

  <script>
    let currentLevel = 1;
    const maxLevels = 5;

    const levelData = {
      1: {
        title: "LEVEL 1",
        description:
          "All selected forms (Q1–Q9) are positioned on a predefined 3×3 intake grid according to question order and response category.",
        image: "assets/levels/level-1.svg"
      },
      2: {
        title: "LEVEL 2",
        description:
          "The grid is removed, isolating the raw visual composition of the selected intake forms.",
        image: "assets/levels/level-2.svg"
      },
      3: {
        title: "LEVEL 3",
        description:
          "A perimeter is generated around each individual form, defining the outline of each mapped response.",
        image: "assets/levels/level-3.svg"
      },
      4: {
        title: "LEVEL 4",
        description:
          "All perimeters are merged into a single, continuous boundary, unifying the structure.",
        image: "assets/levels/level-4.svg"
      },
      5: {
        title: "LEVEL 5",
        description:
          "The system returns to its starting point, ready to visualize a new intake pattern.",
        image: "assets/levels/level-5.svg"
      }
    };

    function nextLevel() {
      currentLevel = currentLevel < maxLevels ? currentLevel + 1 : 1;
      updateLevel();
    }

    function updateLevel() {
      const data = levelData[currentLevel];
      document.getElementById("level-title").textContent = data.title;
      document.getElementById("level-description").textContent = data.description;

      const levelImg = document.getElementById("level-image");
      levelImg.src = data.image;
      levelImg.alt = data.title;

      const arrowIcon = document.getElementById("level-arrow-icon");
      if (currentLevel === maxLevels) {
        arrowIcon.src = "assets/arrow-curved.svg";
        arrowIcon.alt = "Restart Levels";
      } else {
        arrowIcon.src = "assets/arrow-right2.svg";
        arrowIcon.alt = "Next Level";
      }
    }

    // Initialize on load
    updateLevel();
  </script>
</body>
</html>
